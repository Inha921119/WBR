DROP DATABASE IF EXISTS WBR;
CREATE DATABASE WBR;
USE WBR;

# member 테이블 생성
CREATE TABLE `member`(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	loginId VARCHAR(20) NOT NULL UNIQUE,
	loginPw VARCHAR(100) NOT NULL,
	`authLevel` SMALLINT UNSIGNED NOT NULL DEFAULT 3 COMMENT '권한 레벨 (일반 = 3, 관리자 = 7)',
	`name` VARCHAR(20) NOT NULL,
	nickname VARCHAR(20) NOT NULL,
	cellphoneNum VARCHAR(20) NOT NULL,
	email VARCHAR(50) NOT NULL,
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)',
	delDate DATETIME COMMENT '탈퇴 날짜',
	existPlayer SMALLINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '캐릭터 존재여부 (없음 = 0, 있음 = 1)' 
);

# player 테이블 생성
CREATE TABLE player(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	`name` VARCHAR(20) NOT NULL,
	memberId INT UNSIGNED NOT NULL,
	image VARCHAR(20) NOT NULL,
	gender TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '성별 (남성 = 0, 여성 = 1)',
	`level` INT UNSIGNED NOT NULL DEFAULT 1,
	skillPoint INT UNSIGNED NOT NULL DEFAULT 1,
	`exp` INT UNSIGNED NOT NULL DEFAULT 0,
	maxExp INT UNSIGNED NOT NULL DEFAULT 10,
	hp INT UNSIGNED NOT NULL DEFAULT 100,
	maxHp INT UNSIGNED NOT NULL DEFAULT 100,
	sp INT UNSIGNED NOT NULL DEFAULT 100,
	maxSp INT UNSIGNED NOT NULL DEFAULT 100,
	attackPoint INT UNSIGNED NOT NULL DEFAULT 10,
	increseAttackPoint INT NOT NULL DEFAULT 0,
	defencePoint INT UNSIGNED NOT NULL DEFAULT 10,
	increseDefencePoint INT NOT NULL DEFAULT 0,
	hitRate INT UNSIGNED NOT NULL DEFAULT 30,
	increseHitRate INT NOT NULL DEFAULT 0,
	missRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseMissRate INT NOT NULL DEFAULT 0,
	findEnemyRate INT NOT NULL DEFAULT 0,
	findItemRate INT UNSIGNED NOT NULL DEFAULT 20,
	inventoryPoint INT UNSIGNED NOT NULL DEFAULT 0,
	killPoint INT UNSIGNED NOT NULL DEFAULT 0,
	deathStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '사망여부 (사망 전 = 0, 사망 후 = 1)',
	deathDate DATETIME COMMENT '사망 날짜',
	actionType INT UNSIGNED NOT NULL DEFAULT 1 COMMENT '행동유형 (기본 = 1, 선제공격 = 2, 방어태세 = 3, 주변탐색 = 4, 사주경계 = 5, 은밀기동 = 6)',
	nowLocation INT UNSIGNED NOT NULL DEFAULT 0
);

# item 테이블 생성
CREATE TABLE item(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	itemCode INT UNSIGNED NOT NULL DEFAULT 0,
	categoryNum INT UNSIGNED NOT NULL DEFAULT 8,
	`name` VARCHAR(20) NOT NULL,
	rarity INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '레어리티 ( 커먼 = 1, 언커먼 = 2, 레어 = 3, 유니크 = 4)',
	useType INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '사용타입 ( 재료 = 1, 회복 = 2, 장비 = 3)',
	useHand INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '사용타입 ( 한손 = 1, 양손 = 2, 기본 = 3)', 
	useHP INT UNSIGNED NOT NULL DEFAULT 0,
	recoveryHP INT NOT NULL DEFAULT 0,
	increseHP INT UNSIGNED NOT NULL DEFAULT 0,
	decreseHP INT UNSIGNED NOT NULL DEFAULT 0,
	useSP INT UNSIGNED NOT NULL DEFAULT 0,
	recoverySP INT NOT NULL DEFAULT 0,
	increseSP INT UNSIGNED NOT NULL DEFAULT 0,
	decreseSP INT UNSIGNED NOT NULL DEFAULT 0,
	increseAttackPoint INT UNSIGNED NOT NULL DEFAULT 0,
	decreseAttackPoint INT UNSIGNED NOT NULL DEFAULT 0,
	increseDefencePoint INT UNSIGNED NOT NULL DEFAULT 0,
	decreseDefencePoint INT UNSIGNED NOT NULL DEFAULT 0,
	increseHitRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseHitRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseMissRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseMissRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseFindItemRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseFindItemRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseFindEnemyRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseFindEnemyRate INT UNSIGNED NOT NULL DEFAULT 0,
	durabilityPoint INT UNSIGNED NOT NULL DEFAULT 0,
	inventoryPoint INT UNSIGNED NOT NULL DEFAULT 0,
	dropRate INT UNSIGNED NOT NULL DEFAULT 0,
	recipeItem1 INT UNSIGNED NOT NULL DEFAULT 0,
	recipeItem2 INT UNSIGNED NOT NULL DEFAULT 0,
	recipeItem3 INT UNSIGNED NOT NULL DEFAULT 0
);

# article 테이블 생성
CREATE TABLE article(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	memberId INT UNSIGNED NOT NULL,
	boardId INT UNSIGNED NOT NULL,
	title VARCHAR(100) NOT NULL,
	`body` TEXT NOT NULL,
	hitCount INT UNSIGNED NOT NULL DEFAULT 0
);

# board 테이블 생성
CREATE TABLE board(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	`code` VARCHAR(20) NOT NULL UNIQUE COMMENT 'notice(공지사항), free(자유), ...',
	`name` VARCHAR(20) NOT NULL UNIQUE COMMENT '게시판 이름',
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '삭제여부 (삭제 전 = 0, 삭제 후 = 1)',
	delDate DATETIME COMMENT '삭제 날짜'
);

# reactionPoint 테이블 생성
CREATE TABLE reactionPoint(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	memberId INT UNSIGNED NOT NULL,
	relTypeCode VARCHAR(20) NOT NULL COMMENT '관련 데이터 타입 코드',
	relId INT UNSIGNED NOT NULL COMMENT '관련 데이터 번호',
	`point` SMALLINT NOT NULL DEFAULT 0 COMMENT '반응 (좋아요 = +1, 싫어요 = -1)'
);

# reply 테이블 생성
CREATE TABLE reply(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	memberId INT UNSIGNED NOT NULL,
	relTypeCode VARCHAR(20) NOT NULL COMMENT '관련 데이터 타입 코드',
	relId INT UNSIGNED NOT NULL COMMENT '관련 데이터 번호',
	`body` TEXT NOT NULL
);

# equipment 테이블 생성
CREATE TABLE equipment(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	usedItemCode INT UNSIGNED NOT NULL DEFAULT 999,
	usedItemDP INT UNSIGNED NOT NULL DEFAULT 999
);

# actionType 테이블 생성
CREATE TABLE actionType(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	TypeName VARCHAR(20) NOT NULL
);

# inventory 테이블 생성
CREATE TABLE inventory(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	itemId INT UNSIGNED NOT NULL,
	quantity INT UNSIGNED NOT NULL,
	itemDP INT UNSIGNED NOT NULL DEFAULT 0,
	delStatus SMALLINT UNSIGNED NOT NULL DEFAULT 1
);

# itemCategory 테이블 생성
CREATE TABLE itemCategory(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	category VARCHAR(20) NOT NULL
);


# location 테이블 생성
CREATE TABLE location(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	lname VARCHAR(20) NOT NULL
);

# skillList table 생성	
CREATE TABLE skillList(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	`name` VARCHAR(20) NOT NULL,
	skillType SMALLINT UNSIGNED NOT NULL COMMENT '패시브 = 1, 액티브 = 2',
	needSkillPoint INT UNSIGNED NOT NULL DEFAULT 1,
	needLearnLevel INT UNSIGNED NOT NULL DEFAULT 1,
	weaponType INT UNSIGNED NOT NULL DEFAULT 0,
	attackPoint INT UNSIGNED NOT NULL DEFAULT 0,
	defencePoint INT UNSIGNED NOT NULL DEFAULT 0,
	useHP INT UNSIGNED NOT NULL DEFAULT 0,
	recoveryHP INT NOT NULL DEFAULT 0,
	increseHP INT UNSIGNED NOT NULL DEFAULT 0,
	decreseHP INT UNSIGNED NOT NULL DEFAULT 0,
	useSP INT UNSIGNED NOT NULL DEFAULT 0,
	recoverySP INT NOT NULL DEFAULT 0,
	increseSP INT UNSIGNED NOT NULL DEFAULT 0,
	decreseSP INT UNSIGNED NOT NULL DEFAULT 0,
	increseAttackPoint INT UNSIGNED NOT NULL DEFAULT 0,
	decreseAttackPoint INT UNSIGNED NOT NULL DEFAULT 0,
	increseDefencePoint INT UNSIGNED NOT NULL DEFAULT 0,
	decreseDefencePoint INT UNSIGNED NOT NULL DEFAULT 0,
	increseHitRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseHitRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseMissRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseMissRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseFindItemRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseFindItemRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseFindEnemyRate INT UNSIGNED NOT NULL DEFAULT 0,
	decreseFindEnemyRate INT UNSIGNED NOT NULL DEFAULT 0
);

# skill table 생성
CREATE TABLE skill(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	skillId INT UNSIGNED NOT NULL
);

# gameLog table 생성
CREATE TABLE gameLog(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	roundNum INT UNSIGNED NOT NULL,
	logBody TEXT NOT NULL
);

# gameRound table 생성
CREATE TABLE gameRound(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	winMemberId INT UNSIGNED,
	winnerName VARCHAR(20),
	endStatus SMALLINT UNSIGNED NOT NULL DEFAULT 0,
	endDate DATETIME
);

# winPlayer 테이블 생성
CREATE TABLE winPlayer(
	Nid INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INT UNSIGNED NOT NULL,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	winRound INT UNSIGNED NOT NULL,
	`name` VARCHAR(20) NOT NULL,
	memberId INT UNSIGNED NOT NULL,
	image VARCHAR(20) NOT NULL,
	gender TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '성별 (남성 = 0, 여성 = 1)',
	`level` INT UNSIGNED NOT NULL DEFAULT 1,
	skillPoint INT UNSIGNED NOT NULL DEFAULT 1,
	`exp` INT UNSIGNED NOT NULL DEFAULT 0,
	maxExp INT UNSIGNED NOT NULL DEFAULT 10,
	hp INT UNSIGNED NOT NULL DEFAULT 100,
	maxHp INT UNSIGNED NOT NULL DEFAULT 100,
	sp INT UNSIGNED NOT NULL DEFAULT 100,
	maxSp INT UNSIGNED NOT NULL DEFAULT 100,
	attackPoint INT UNSIGNED NOT NULL DEFAULT 10,
	increseAttackPoint INT NOT NULL DEFAULT 0,
	defencePoint INT UNSIGNED NOT NULL DEFAULT 10,
	increseDefencePoint INT NOT NULL DEFAULT 0,
	hitRate INT UNSIGNED NOT NULL DEFAULT 30,
	increseHitRate INT NOT NULL DEFAULT 0,
	missRate INT UNSIGNED NOT NULL DEFAULT 0,
	increseMissRate INT NOT NULL DEFAULT 0,
	findEnemyRate INT NOT NULL DEFAULT 0,
	findItemRate INT UNSIGNED NOT NULL DEFAULT 20,
	inventoryPoint INT UNSIGNED NOT NULL DEFAULT 0,
	killPoint INT UNSIGNED NOT NULL DEFAULT 0,
	deathStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '사망여부 (사망 전 = 0, 사망 후 = 1)',
	deathDate DATETIME COMMENT '사망 날짜',
	actionType INT UNSIGNED NOT NULL DEFAULT 1 COMMENT '행동유형 (기본 = 1, 선제공격 = 2, 방어태세 = 3, 주변탐색 = 4, 사주경계 = 5, 은밀기동 = 6)',
	nowLocation INT UNSIGNED NOT NULL DEFAULT 999
);

# winnerSkill table 생성
CREATE TABLE winnerSkill(
	Nid INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INT UNSIGNED NOT NULL,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	winRound INT UNSIGNED NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	skillId INT UNSIGNED NOT NULL
);

# winnerInventory 테이블 생성
CREATE TABLE winnerInventory(
	Nid INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INT UNSIGNED NOT NULL,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	winRound INT UNSIGNED NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	itemId INT UNSIGNED NOT NULL,
	quantity INT UNSIGNED NOT NULL,
	itemDP INT UNSIGNED NOT NULL DEFAULT 0,
	delStatus smallINT UNSIGNED NOT NULL DEFAULT 1
);

# winnerEquipment 테이블 생성
CREATE TABLE winnerEquipment(
	Nid INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INT UNSIGNED NOT NULL,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	winRound INT UNSIGNED NOT NULL,
	playerId INT UNSIGNED NOT NULL,
	usedItemCode INT UNSIGNED NOT NULL DEFAULT 0,
	usedItemDP INT UNSIGNED NOT NULL DEFAULT 999
);